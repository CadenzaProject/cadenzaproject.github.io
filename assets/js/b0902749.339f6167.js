"use strict";(self.webpackChunkclarity_cec_1=self.webpackChunkclarity_cec_1||[]).push([[5750],{3905:(e,a,n)=>{n.d(a,{Zo:()=>d,kt:()=>h});var t=n(7294);function i(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function l(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function r(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?l(Object(n),!0).forEach((function(a){i(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,t,i=function(e,a){if(null==e)return{};var n,t,i={},l=Object.keys(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||(i[n]=e[n]);return i}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=t.createContext({}),c=function(e){var a=t.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):r(r({},a),e)),n},d=function(e){var a=c(e.components);return t.createElement(s.Provider,{value:a},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},m=t.forwardRef((function(e,a){var n=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=c(n),m=i,h=p["".concat(s,".").concat(m)]||p[m]||u[m]||l;return n?t.createElement(h,r(r({ref:a},d),{},{components:n})):t.createElement(h,r({ref:a},d))}));function h(e,a){var n=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var l=n.length,r=new Array(l);r[0]=m;var o={};for(var s in a)hasOwnProperty.call(a,s)&&(o[s]=a[s]);o.originalType=e,o[p]="string"==typeof e?e:i,r[1]=o;for(var c=2;c<l;c++)r[c]=n[c];return t.createElement.apply(null,r)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7956:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var t=n(7462),i=(n(7294),n(3905));n(8209),n(4996);const l={id:"cc1_data_overview_car",title:"Task 2 Car",sidebar_label:"Task2 car",sidebar_position:5.2},r=void 0,o={unversionedId:"cadenza1/Data/cc1_data_overview_car",id:"cadenza1/Data/cc1_data_overview_car",title:"Task 2 Car",description:"Data and baseline code can be downloaded from the download page following this timeline.",source:"@site/docs/cadenza1/Data/cc1_data_overview_car.md",sourceDirName:"cadenza1/Data",slug:"/cadenza1/Data/cc1_data_overview_car",permalink:"/docs/cadenza1/Data/cc1_data_overview_car",draft:!1,tags:[],version:"current",sidebarPosition:5.2,frontMatter:{id:"cc1_data_overview_car",title:"Task 2 Car",sidebar_label:"Task2 car",sidebar_position:5.2},sidebar:"tutorialSidebar1",previous:{title:"Task1 headphones",permalink:"/docs/cadenza1/Data/cc1_data_overview_headphone"},next:{title:"Listener data",permalink:"/docs/cadenza1/Data/cc1_data_listener"}},s={},c=[{value:"1 Training/development",id:"1-trainingdevelopment",level:2},{value:"1.1 Music Data",id:"11-music-data",level:3},{value:"1.2 HRTF Data",id:"12-hrtf-data",level:3},{value:"2 Evaluation",id:"2-evaluation",level:2},{value:"3. Data file formats and naming conventions",id:"3-data-file-formats-and-naming-conventions",level:2},{value:"3.1 Enhanced signals",id:"31-enhanced-signals",level:3},{value:"3.2 Evaluation Signal",id:"32-evaluation-signal",level:3},{value:"3.3 Music Metadata",id:"33-music-metadata",level:3},{value:"3.4 HRTFs Metadata",id:"34-hrtfs-metadata",level:3},{value:"3.5 Scenes Metadata",id:"35-scenes-metadata",level:3},{value:"4. Reference",id:"4-reference",level:2}],d={toc:c},p="wrapper";function u(e){let{components:a,...n}=e;return(0,i.kt)(p,(0,t.Z)({},d,n,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Data and baseline code can be downloaded from the ",(0,i.kt)("a",{parentName:"p",href:"../Take%20part/cc1_download"},"download page")," following this ",(0,i.kt)("a",{parentName:"p",href:"../Take%20part/cc1_key_dates"},"timeline"),"."),(0,i.kt)("h2",{id:"1-trainingdevelopment"},"1 Training/development"),(0,i.kt)("h3",{id:"11-music-data"},"1.1 Music Data"),(0,i.kt)("p",null,"The music dataset is based on the small split of the FMA dataset and MTG Jamendo. FMA-Small is a balanced dataset for\ngenre classification. From the eight genres available in FMA-small, we selected five genres:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Hip-Hop")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Instrumental")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"International")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Pop")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Rock"))),(0,i.kt)("p",null,"However, those with hearing loss are more likely to be older people who listen to ",(0,i.kt)("inlineCode",{parentName:"p"},"classical")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"orchestral")," music ","[1]",". Therefore,  we included samples from these two genres sourced from the MTG-Jamendo dataset:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Classical")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Orchestral"))),(0,i.kt)("p",null,"Each genre contains 900 30-seconds samples divided into 800 for training and 100 for development. "),(0,i.kt)("h3",{id:"12-hrtf-data"},"1.2 HRTF Data"),(0,i.kt)("p",null,"To allow for the 'room' acoustic in the car, we use ",(0,i.kt)("inlineCode",{parentName:"p"},"Anechoic")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Car")," binaural room impulse\nresponses from the eBrIRD ELOSPHERES dataset."),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"2-evaluation"},"2 Evaluation"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"700 30-second samples"),(0,i.kt)("li",{parentName:"ul"},"You should process all the music."),(0,i.kt)("li",{parentName:"ul"},"All the music will be used for ",(0,i.kt)("a",{parentName:"li",href:"../../learning_resources/Hearing_aid_processing/edu_HAP_HA_processed_speech"},"HAAQI evaluation"),"."),(0,i.kt)("li",{parentName:"ul"},"We will then select a random 10-second sample from some of this music for listening panel evaluation.")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"3-data-file-formats-and-naming-conventions"},"3. Data file formats and naming conventions"),(0,i.kt)("h3",{id:"31-enhanced-signals"},"3.1 Enhanced signals"),(0,i.kt)("p",null,"The baseline generates one output per scene:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"<Dataset Split>/<Listener ID>/<Scene_ID>_<Listener ID>_<Song ID>.flac")),(0,i.kt)("p",null,"Where:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Dataset Split")," - Split you are evaluation, ",(0,i.kt)("inlineCode",{parentName:"li"},"train"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"valid")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"test"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Listener ID")," - ID of the listener panel member, e.g., L001 to L100 for initial ",(0,i.kt)("inlineCode",{parentName:"li"},"pseudo-listeners"),", etc."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Song ID")," - ID of the song.")),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"valid\n  \u251c\u2500\u2500\u2500L5000_fma_041020.wav\n  \u251c\u2500\u2500\u2500L5000_fma_058333.wav\n  \u251c\u2500\u2500\u2500L5007_mtg_00539764.wav\n  \u251c\u2500\u2500\u2500 ... \n")),(0,i.kt)("h3",{id:"32-evaluation-signal"},"3.2 Evaluation Signal"),(0,i.kt)("p",null,"In the evaluation stage, several signal can be generated to explore the different intermediate signals. For example, you might want to explore the output of the hearing aid to ensure that samples are not clipped. These additonal signals can be generated by setting the parameter ",(0,i.kt)("inlineCode",{parentName:"p"},"evaluate.save_intermediate_wavs")," to True in ",(0,i.kt)("inlineCode",{parentName:"p"},"config.yaml"),"."),(0,i.kt)("p",null,"When ",(0,i.kt)("inlineCode",{parentName:"p"},"evaluate.save_intermediate_wavs")," is False, the evaluation generates:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ha_processed_signal.wav")," - Output of the HA to use in HAAQI evaluation."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ref_signal_for_eval")," - Reference signal to use in HAAQI evaluation.")),(0,i.kt)("p",null,"When ",(0,i.kt)("inlineCode",{parentName:"p"},"evaluate.save_intermediate_wavs")," is True, the evaluation also generates:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"car_noise_anechoic.wav")," - Car noise with anechoic HRTFs at the front HA microphones."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"car_noise_anechoic_scaled.wav")," - Car noise with anechoic HRTFs at the front HA microphones scaled to SNR."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"enh_signal_hrtf.wav")," - Enhanced musical signal with car HRTFs at the front HA microphone."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"enh_signal_hrtf_plus_car_noise_anechoic.wav")," - Enhanced music with car noise added at certain SNR. Signal to pass through the HA."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ref_signal_anechoic.wav")," - Reference signal with anechoic HRTFs at the eardrums.")),(0,i.kt)("h3",{id:"33-music-metadata"},"3.3 Music Metadata"),(0,i.kt)("p",null,"Music data is store in a single JSON per file dataset with the following format."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'  {\n  "fma_000002": {\n    "track_id": "000002",\n    "path": "training/Hip-Hop/000002.mp3",\n    "artist": "AWOL",\n    "album": "AWOL - A Way Of Life",\n    "title": "Food",\n    "license": "Attribution-NonCommercial-ShareAlike 3.0 International",\n    "genre": "Hip-Hop",\n    "bit_rate": 256000,\n    "duration": 168,\n    "channels": 2,\n    "source": "fma"\n  },\n...\n')),(0,i.kt)("h3",{id:"34-hrtfs-metadata"},"3.4 HRTFs Metadata"),(0,i.kt)("p",null,"HRTFs data is stored in a single JSON with the following format."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "train": {\n      "-57.5": {\n        "car": {\n          "left_speaker": {\n            "left_side": "HR13_E03_CH1_Left",\n            "right_side": "HR13_E03_CH1_Right"\n          },\n          "right_speaker": {\n            "left_side": "HR13_E04_CH1_Left",\n            "right_side": "HR13_E04_CH1_Right"\n          }\n        },\n        "anechoic": {\n          "left_speaker": {\n            "left_side": "HR5_E02_CH0_Left",\n            "right_side": "HR5_E02_CH0_Right"\n          },\n          "right_speaker": {\n            "left_side": "HR21_E02_CH0_Left",\n            "right_side": "HR21_E02_CH0_Right"\n          }\n        }\n      },\n      ...\n    ...\n}\n')),(0,i.kt)("h3",{id:"35-scenes-metadata"},"3.5 Scenes Metadata"),(0,i.kt)("p",null,"Scene data is stored in a single JSON with the following format."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "S100000": {\n        "scene": "S100000",\n        "song": "fma_081613",\n        "song_path": "training/Instrumental/081613.mp3",\n        "hr": 25.0,\n        "car_noise_parameters": {\n            "speed": 114.0,\n            "gear": 6,\n            "reference_level_db": 30.9,\n            "engine_num_harmonics": 12,\n            "rpm": 1915.2,\n            "primary_filter": {"order": 1, "btype": "lowpass", "cutoff_hz": 20.3632},\n            "secondary_filter": {"order": 2, "btype": "lowpass", "cutoff_hz": 314.2048},\n            "bump": {"order": 2, "btype": "bandpass", "cutoff_hz": [77, 110]},\n            "dip_low": {"order": 1, "btype": "lowpass", "cutoff_hz": 170},\n            "dip_high": {"order": 1, "btype": "highpass", "cutoff_hz": 455}\n        },\n        "snr": 7.8386,\n        "split": "train"\n    },\n...\n')),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"4-reference"},"4. Reference"),(0,i.kt)("p",null,"[1]"," Bonneville-Roussy, A., Rentfrow, P. J., Xu, M. K., & Potter, J. (2013). Music through the ages: Trends in musical\nengagement and preferences from adolescence through middle adulthood. Journal of personality and social psychology, 105(4), 703."))}u.isMDXComponent=!0},8209:(e,a,n)=>{n(7294)}}]);